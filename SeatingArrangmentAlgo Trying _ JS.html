<!DOCTYPE html>
<html>

<body>
    <script>

        function incChar(c) {   //character incrementer function
            return String.fromCharCode(c.charCodeAt(0) + 1);
        }

        function findIn(A, a) { //find number in an array
            for (var f = 0; f < A.length; f++) {
                if (a == A[f][0].Section)
                    return f;   //returns index if number is found
            }
            return false;
        }

        class Student {      //A class of student
            constructor(rolno, sec) {
                this.RollNo = rolno;
                this.Section = sec;
            }
            Data() {
                return " RollNo: " + this.RollNo + " Section: " + this.Section;
            }
        }

        //declaration and initialization
        var ch = 'A';
        var A = new Array();    //New Array
        var nofSec = [11, 16, 14, 13];   //declare an array having number of students of each section
        //input in the form of different sections
        var rn = 201;   //roll number starts from
        for (var i = 0; i < nofSec.length; i++) {
            A[i] = [];
            for (var j = 0; j < nofSec[i]; j++) {
                std = new Student("2017-CS-" + ch + "-" + rn, ch);
                // student.RollNo = rn + ch; student.Section = ch;
                // document.write(std.Data());
                A[i].push(std);
                rn++;
            }
            ch = incChar(ch);
        }

        // document.write("<br>First Data: " + A[0][0].Data());
        // var d = 0;
        // if ((d = findIn(A, "D")) !== false)
        //     document.write(d);

        document.write("<br>Range from: " + A[0][0].RollNo + " to " + A[i - 1][j - 1].RollNo);
        // document.write("It's true: " + aa.find("a"));
        // document.write("Input Array: " + A.Data());
        document.write("<br>Number of Sections: " + A.length + "<br>");
        var NArray = [];
        // NArray[0] = ;
        i = 0;
        std = 0;
        for (s = 0; s < A.length; s++) {
            std += A[s].length;
            document.write("Students of section " + A[s][0].Section + " = " + A[s].length + "<br>");
        }
        document.write("Total Number of studetns: " + std + "<br><br><br>");

        function DisplayArray2(A) { //function to display the input array
            for (var i = 0; i < A.length; i++) {
                for (var j = 0; j < A[i].length; j++) {
                    document.write(A[i][j].RollNo + " - ");
                }
            }
        }

        function DisplayArray1(A) { //function to display the output array
            for (var i = 0; i < A.length; i++) {
                document.write(A[i].RollNo + " - ");
            }
        }
        SeatingAlgo(A);


        function SeatingAlgo(A) {
            //algorithm starting almost
            leng = len = A.length;
            flag = true;
            fin = true;
            for (var i = 1; i <= 10; i++) {
                NArray[-i] = new Student("", "");
            }
            i = 0;
            while (leng > 0) {
                flag = false;
                //popping from input array and pushing in output array according to the condition
                for (j = 0; j < len; j++) {
                    if (A[j].length > 0 &&
                        JSON.stringify(A[j][0].Section) !==
                        JSON.stringify(NArray[i - 10].Section) &&
                        JSON.stringify(NArray[i - 1].Section) !== (JSON.stringify(A[j][0].Section) || i % 10 == 0)) {
                        // document.write("In.")
                        NArray.push(A[j].shift());
                        i++;
                        flag = true;
                    }
                }
                var count = 0;
                for (a = 0; a < len; a++) {
                    if (A[a].length == 0) continue;
                    count++;
                }
                // document.write("Number of sections: " + count + "<br><br>");
                leng = count;//updating the new length of array: number of sections left
                if (flag == false) {

                    //ask to the user how to allot the seats
                    if (fin == true) {
                        finish = window.prompt("Last " + (std - i) + " students are overlapping..!\nEnter number \n1(As it is) 0r 2(with Spaces): ");  //if 1 then allot them as it is, if 2 allot them with spaces
                        fin = false;
                    }

                    if (finish == 1) {
                        for (r = 0; r < len; r++) {
                            while (A[r].length > 0) {
                                NArray.push(A[r].shift());
                                ++i
                            }
                        }
                    }
                    else if (finish == 2) {
                        flag = true;
                        st = new Student("2017- X -X-000", "X");
                        NArray.push(st);   //X is Supposed to be space
                        i++;
                    }
                }
            }//end the main while (outer) loop
            //Displaying the results
            document.write("Number of seats allocated: " + i + "<br>");
            // if (flag == false) {
            //     document.write("Student are left = " + (std - i) + "<br>");
            // }
            //displaying the resulting array
            var c = 1;
            for (n = 0; n < NArray.length; n++) {
                if ((n + 1) % 10 == 1) {
                    document.write("<br>Column#" + c + " : ");
                    c++;
                }
                // DisplayArray1(NArray);
                document.write("(" + NArray[n].RollNo);
                document.write(")--");// when n=" + n + " ");
            }
        }
    </script>

</body>

</html>
